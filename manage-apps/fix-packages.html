<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Package Manager Maintenance - Pop!_OS Documentation</title>


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="The Pop!_OS documentation website">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="../theme/css/fonts.css">

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="../index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="../introduction/what-is-pop.html"><strong aria-hidden="true">2.</strong> What is Pop!_OS?</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../introduction/cosmic-shell-intro.html"><strong aria-hidden="true">2.1.</strong> Introduction to COSMIC & the Pop!_Shell</a></li><li class="chapter-item expanded "><a href="../introduction/pop-development-roadmap.html"><strong aria-hidden="true">2.2.</strong> Pop!_OS Development Roadmap</a></li><li class="chapter-item expanded "><a href="../introduction/contribute-to-pop.html"><strong aria-hidden="true">2.3.</strong> Contribute to Pop!_OS</a></li><li class="chapter-item expanded "><div><strong aria-hidden="true">2.4.</strong> Use Pop!_OS In a Virtual Machine</div></li></ol></li><li class="chapter-item expanded "><a href="../getting-started/getting-started.html"><strong aria-hidden="true">3.</strong> Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/create-bootable-media/create-bootable-usb.html"><strong aria-hidden="true">3.1.</strong> Create a Bootable Pop!_OS USB Device</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../getting-started/create-bootable-media/bootable-usb-using-linux.html"><strong aria-hidden="true">3.1.1.</strong> Using Linux</a></li><li class="chapter-item expanded "><a href="../getting-started/create-bootable-media/bootable-usb-using-windows.html"><strong aria-hidden="true">3.1.2.</strong> Using Windows</a></li><li class="chapter-item expanded "><a href="../getting-started/create-bootable-media/bootable-usb-using-macos.html"><strong aria-hidden="true">3.1.3.</strong> Using macOS</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">3.2.</strong> Demo Pop!_OS Before Installing</div></li><li class="chapter-item expanded "><a href="../getting-started/installation/installation.html"><strong aria-hidden="true">3.3.</strong> Install Pop!_OS</a></li><li><ol class="section"><li class="chapter-item expanded "><div><strong aria-hidden="true">3.3.1.</strong> Custom (Advanced) Installation</div></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../navigate-pop/navigate-pop.html"><strong aria-hidden="true">4.</strong> Navigate Pop!_OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../navigate-pop/launching-applications.html"><strong aria-hidden="true">4.1.</strong> Locate & Launch Applications</a></li><li class="chapter-item expanded "><a href="../navigate-pop/switching-apps.html"><strong aria-hidden="true">4.2.</strong> Switch Application Windows</a></li><li class="chapter-item expanded "><a href="../navigate-pop/using-workspaces.html"><strong aria-hidden="true">4.3.</strong> Navigate with Workspaces</a></li><li class="chapter-item expanded "><a href="../navigate-pop/tiling-stacking-windows.html"><strong aria-hidden="true">4.4.</strong> Tile, Stack, & Resize Windows</a></li><li class="chapter-item expanded "><a href="../navigate-pop/navigate-files-folders.html"><strong aria-hidden="true">4.5.</strong> Navigate Files & Folders</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../navigate-pop/viewing-sorting-options.html"><strong aria-hidden="true">4.5.1.</strong> Viewing & Sorting Options</a></li><li class="chapter-item expanded "><a href="../navigate-pop/bookmarks-starred-items.html"><strong aria-hidden="true">4.5.2.</strong> Bookmarks & Starred Items</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="../customize-pop/customize-pop.html"><strong aria-hidden="true">5.</strong> Customize Pop!_OS</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/customize-desktop.html"><strong aria-hidden="true">5.1.</strong> Customize the Desktop</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/desktop-options.html"><strong aria-hidden="true">5.1.1.</strong> Desktop Options</a></li><li class="chapter-item expanded "><a href="../customize-pop/background-settings.html"><strong aria-hidden="true">5.1.2.</strong> Background Settings</a></li><li class="chapter-item expanded "><a href="../customize-pop/appearance-settings.html"><strong aria-hidden="true">5.1.3.</strong> Appearance Settings</a></li><li class="chapter-item expanded "><a href="../customize-pop/dock-settings.html"><strong aria-hidden="true">5.1.4.</strong> Dock Settings</a></li><li class="chapter-item expanded "><a href="../customize-pop/workspace-settings.html"><strong aria-hidden="true">5.1.5.</strong> Workspaces Settings</a></li></ol></li><li class="chapter-item expanded "><a href="../customize-pop/application-settings.html"><strong aria-hidden="true">5.2.</strong> Configure Application Settings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/applications-menu.html"><strong aria-hidden="true">5.2.1.</strong> Applications Settings</a></li><li class="chapter-item expanded "><a href="../customize-pop/application-notifications.html"><strong aria-hidden="true">5.2.2.</strong> Application Notifications</a></li><li class="chapter-item expanded "><a href="../customize-pop/default-applications.html"><strong aria-hidden="true">5.2.3.</strong> Default Applications</a></li></ol></li><li class="chapter-item expanded "><a href="../customize-pop/keyboard-settings.html"><strong aria-hidden="true">5.3.</strong> Manage Keyboard Languages, Layouts, & Shortcuts</a></li><li class="chapter-item expanded "><a href="../customize-pop/online-accounts.html"><strong aria-hidden="true">5.4.</strong> Connect an Online Account</a></li><li class="chapter-item expanded "><a href="../customize-pop/color-profiles.html"><strong aria-hidden="true">5.5.</strong> Manage Color Profiles</a></li><li class="chapter-item expanded "><a href="../customize-pop/region-language.html"><strong aria-hidden="true">5.6.</strong> Configure Region & Language</a></li><li class="chapter-item expanded "><a href="../customize-pop/accessibility-settings.html"><strong aria-hidden="true">5.7.</strong> Enable Accessibility Settings</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/accessibility-seeing.html"><strong aria-hidden="true">5.7.1.</strong> Seeing</a></li><li class="chapter-item expanded "><a href="../customize-pop/accessibility-hearing.html"><strong aria-hidden="true">5.7.2.</strong> Hearing</a></li><li class="chapter-item expanded "><a href="../customize-pop/accessibility-typing.html"><strong aria-hidden="true">5.7.3.</strong> Typing</a></li><li class="chapter-item expanded "><a href="../customize-pop/pointing-clicking.html"><strong aria-hidden="true">5.7.4.</strong> Pointing & Clicking</a></li></ol></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-extensions.html"><strong aria-hidden="true">5.8.</strong> Manage GNOME Tweaks & Extensions</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks.html"><strong aria-hidden="true">5.8.1.</strong> GNOME Tweaks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-appearance.html"><strong aria-hidden="true">5.8.1.1.</strong> Appearance</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-fonts.html"><strong aria-hidden="true">5.8.1.2.</strong> Fonts</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-keyboard-mouse.html"><strong aria-hidden="true">5.8.1.3.</strong> Keyboard & Mouse</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-startup-applications.html"><strong aria-hidden="true">5.8.1.4.</strong> Startup Applications</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-topbar.html"><strong aria-hidden="true">5.8.1.5.</strong> Top Bar</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-window-titlebars.html"><strong aria-hidden="true">5.8.1.6.</strong> Window Titlebars</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-tweaks-windows.html"><strong aria-hidden="true">5.8.1.7.</strong> Windows</a></li></ol></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/gnome-extensions.html"><strong aria-hidden="true">5.8.2.</strong> GNOME Extensions</a></li><li class="chapter-item expanded "><a href="../customize-pop/gnome-tweaks-extensions/user-themes.html"><strong aria-hidden="true">5.8.3.</strong> Manage User Themes</a></li></ol></li><li class="chapter-item expanded "><a href="../manage-apps/managing-applications.html"><strong aria-hidden="true">5.9.</strong> Manage Applications & Repositories</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../manage-apps/using-pop-shop.html"><strong aria-hidden="true">5.9.1.</strong> Using the Pop!_Shop</a></li><li class="chapter-item expanded "><a href="../manage-apps/using-eddy.html"><strong aria-hidden="true">5.9.2.</strong> Using Eddy</a></li><li class="chapter-item expanded "><a href="../manage-apps/using-appimages.html"><strong aria-hidden="true">5.9.3.</strong> Using AppImages</a></li><li class="chapter-item expanded "><a href="../manage-apps/using-terminal.html"><strong aria-hidden="true">5.9.4.</strong> Using the Terminal</a></li><li class="chapter-item expanded "><a href="../manage-apps/manage-repos.html"><strong aria-hidden="true">5.9.5.</strong> Manage Repositories</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../manage-apps/manage-repos-repoman.html"><strong aria-hidden="true">5.9.5.1.</strong> Using Repoman (GUI)</a></li><li class="chapter-item expanded "><a href="../manage-apps/manage-repos-terminal.html"><strong aria-hidden="true">5.9.5.2.</strong> Using the Terminal (CLI)</a></li><li class="chapter-item expanded "><a href="../manage-apps/manage-repos-manually.html"><strong aria-hidden="true">5.9.5.3.</strong> Using Text Files</a></li></ol></li><li class="chapter-item expanded "><a href="../manage-apps/fix-packages.html" class="active"><strong aria-hidden="true">5.9.6.</strong> Package Manager Maintenance</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Pop! Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="dark">Pop! Dark</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Pop!_OS Documentation</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/pop-os/docs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/pop-os/docs/edit/master/src/manage-apps/fix-packages.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="package-manager-maintenance"><a class="header" href="#package-manager-maintenance">Package Manager Maintenance</a></h1>
<p>If your system complains about a failed upgrade, package manager conflicts, broken upgrades, or other package-related issues, there are several common fixes to these problems. Some package manager issues can be resolved with the graphical update program, but many require the command line.</p>
<hr />
<h2 id="general-fixes-for-apt-packages"><a class="header" href="#general-fixes-for-apt-packages">General Fixes for Apt Packages</a></h2>
<p>These commands perform general cleanup that can resolve many of <code>apt</code>'s errors and should be run one at a time.</p>
<pre><code class="language-bash">sudo apt clean
sudo apt update
sudo dpkg --configure -a
sudo apt install -f
sudo apt full-upgrade
sudo apt autoremove --purge
</code></pre>
<ul>
<li><code>apt clean</code> - The <code>clean</code> command clears out the local repository of retrieved package files.</li>
<li><code>apt update</code> - the <code>update</code> command fetches indexes from all configured sources. These indexes are used by other apt commands to determine which packages can be upgraded or installed.</li>
<li><code>dpkg --configure -a</code> - The <code>--configure -a</code> command configures any unpacked but not yet configured packages.</li>
<li><code>apt install -f</code> - The <code>-f</code> option attempts to correct broken dependencies</li>
<li><code>apt full-upgrade</code> - In addition to downloading and installing package updates, <code>full-upgrade</code> downgrades or removes dependencies as necessary when upgrading packages.</li>
<li><code>apt autoremove --purge [packagename]</code> - In addition to removing a package, <code>autoremove</code> will remove dependencies no longer required by any installed application. Combining with <code>purge</code> will remove any residual configuration files related to the package.</li>
<li><code>apt autoremove --purge</code> - Running this command with no specified package will remove any packages that were previously dependencies for other installed packages but are no longer required (either because the dependent package was removed, or because the package was updated to no longer depend on certain packages.)</li>
</ul>
<h2 id="fixing-individual-apt-packages"><a class="header" href="#fixing-individual-apt-packages">Fixing Individual Apt Packages</a></h2>
<h3 id="the-reinstall-option"><a class="header" href="#the-reinstall-option">The reinstall Option</a></h3>
<p>You may see packages that are still broken and need to be installed manually or purged manually. This may indicate that the package has broken or cyclical dependencies.</p>
<p>This command reinstalls the package, which can be useful if the package has many reverse dependencies (the packages that depend on a given package):</p>
<pre><code class="language-bash">sudo apt install --reinstall [packagename]
</code></pre>
<h3 id="the-purge-option"><a class="header" href="#the-purge-option">The purge Option</a></h3>
<blockquote>
<p><strong>Note</strong>: Be careful when using <code>purge</code> and <code>autoremove</code>. Verify the terminal output to confirm the command will only affect the packages you are trying to fix. If unrecognized packages are removed causing unexpected changes, run <code>sudo apt install pop-desktop</code> and reboot to ensure those critical Pop!_OS components are reinstalled.</p>
</blockquote>
<p>This command will remove a package and its system-wide configuration files. Use it to remove a package that is causing issues:</p>
<pre><code class="language-bash">sudo apt purge [packagename]
</code></pre>
<h3 id="using-autoremove-with-purge"><a class="header" href="#using-autoremove-with-purge">Using autoremove with purge</a></h3>
<p>Running the <code>autoremove</code> option will remove dependencies that are no longer required by any application after removing a package. Removing unneeded dependencies saves disk space, saves network bandwidth (from future updates to those dependencies), and is a good security practice to reduce the attack surface of the system. To remove both the package and all of its dependencies, run:</p>
<pre><code class="language-bash">sudo apt autoremove --purge [packagename]
</code></pre>
<h3 id="installing-a-specific-version-with-the-policy-option"><a class="header" href="#installing-a-specific-version-with-the-policy-option">Installing a Specific Version with the policy Option</a></h3>
<p>The <code>policy</code> option shows the available versions of a package. This is useful if you want to tell apt to install a specific version using the <code>[packagename]=[version]</code>.</p>
<p>Use this command to list all available versions for an application:</p>
<pre><code class="language-bash">apt policy [packagename]
</code></pre>
<p>Use this command to install a specific version:</p>
<pre><code class="language-bash">sudo apt install [packagename]=[version]
</code></pre>
<h2 id="general-fixes-for-flatpak-packages"><a class="header" href="#general-fixes-for-flatpak-packages">General Fixes for Flatpak Packages</a></h2>
<p>If the Pop!_Shop is showing an update available, but there are no updates listed on the update page, there may be a Flatpak runtime (a backend program that another Flatpak depends on) with an update available. Run these commands to update all Flatpaks and remove any Flatpak runtimes that are no longer required by any installed programs:</p>
<pre><code class="language-bash">flatpak update
flatpak uninstall --unused
flatpak repair --user
</code></pre>
<ul>
<li><code>flatpak update</code> - Search for and apply updates updates for installed Flatpak applications.</li>
<li><code>flatpak uninstall --unused</code> - Remove unused <a href="https://docs.flatpak.org/en/latest/basic-concepts.html#runtimes">runtimes</a>.</li>
<li><code>flatpak repair --user</code> - Repair Flatpak packages for the current user's installation.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../manage-apps/manage-repos-manually.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../manage-apps/manage-repos-manually.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
